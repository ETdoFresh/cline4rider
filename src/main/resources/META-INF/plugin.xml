<?xml version="1.0" encoding="utf-8"?>
<idea-plugin>
    <id>com.cline.rider</id>
    <name>Cline</name>
    <version>1.0.0</version>
    <vendor email="support@cline.dev" url="https://cline.dev">Cline</vendor>

    <description><![CDATA[
        Cline is your AI-powered coding assistant that helps you with complex software development tasks.
        It can handle everything from simple code snippets to complex multi-step projects.
    ]]></description>

    <change-notes><![CDATA[
        Initial release of Cline for Rider.
    ]]></change-notes>

    <depends>com.intellij.modules.rider</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Tool Windows -->
        <toolWindow id="Cline"
                    icon="/icons/clineToolWindow.svg"
                    anchor="right"
                    secondary="false"
                    canCloseContents="false"
                    factoryClass="com.cline.ui.ClineToolWindowFactory"/>
        
        <toolWindow id="Tasks"
                    icon="/icons/clineToolWindow.svg"
                    anchor="right"
                    secondary="true"
                    canCloseContents="false"
                    factoryClass="com.cline.task.ui.TaskToolWindowFactory"/>

        <!-- Services -->
        <projectService serviceImplementation="com.cline.task.TaskManager"/>
        <projectService serviceImplementation="com.cline.task.persistence.TaskStorage"/>
        <applicationService serviceImplementation="com.cline.settings.ClineSettings"/>
        <projectService serviceImplementation="com.cline.ui.model.ChatViewModel"
                       serviceInterface="com.cline.ui.model.ChatViewModel"/>
        <projectService serviceImplementation="com.cline.persistence.ChatHistory"
                       serviceInterface="com.cline.persistence.ChatHistory"/>

        <!-- Notifications -->
        <notificationGroup id="Cline Notifications"
                          displayType="BALLOON"
                          key="notification.group.cline"/>

        <!-- Settings -->
        <applicationConfigurable
                parentId="tools"
                instance="com.cline.settings.ClineSettingsConfigurable"
                id="com.cline.settings.ClineSettingsConfigurable"
                displayName="Cline"/>

        <!-- Startup Activities -->
        <postStartupActivity implementation="com.cline.startup.ClineStartupActivity"/>
    </extensions>

    <actions>
        <action id="Cline.OpenToolWindow"
                class="com.cline.actions.OpenClineAction"
                text="Open Cline"
                description="Open Cline AI Assistant">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="control alt C"/>
            <keyboard-shortcut keymap="Mac OS X" first-keystroke="meta alt C"/>
            <keyboard-shortcut keymap="Mac OS X 10.5+" first-keystroke="meta alt C"/>
        </action>
        
        <action id="Cline.OpenTasksWindow"
                class="com.cline.actions.OpenTasksAction"
                text="Open Cline Tasks"
                description="Open Cline Tasks Window">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="control alt T"/>
            <keyboard-shortcut keymap="Mac OS X" first-keystroke="meta alt T"/>
            <keyboard-shortcut keymap="Mac OS X 10.5+" first-keystroke="meta alt T"/>
        </action>
    </actions>

    <applicationListeners>
        <!-- Add your application listeners here -->
    </applicationListeners>
</idea-plugin>
