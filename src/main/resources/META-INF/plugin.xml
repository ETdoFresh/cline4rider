<?xml version="1.0" encoding="UTF-8"?>
<idea-plugin>
    <id>com.cline</id>
    <name>Cline</name>
    <vendor>etgarcia</vendor>
    <description>Cline - AI Assistant for Rider</description>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService serviceImplementation="com.cline.settings.ClineSettings"/>
        <projectService serviceImplementation="com.cline.api.ApiProvider"/>
        <projectService serviceImplementation="com.cline.ui.model.ChatViewModel"/>
        <projectService serviceImplementation="com.cline.persistence.ChatHistory"/>
        <projectService serviceImplementation="com.cline.tasks.TaskProcessor"/>
        <projectService serviceImplementation="com.cline.task.TaskManager"/>
        <projectService serviceImplementation="com.cline.task.persistence.TaskStorage"/>
        
        <toolWindow id="Cline"
                    secondary="true"
                    icon="AllIcons.General.Modified"
                    anchor="right"
                    factoryClass="com.cline.ui.ClineToolWindowFactory"/>
                    
        <toolWindow id="Cline Tasks"
                    secondary="true"
                    icon="AllIcons.General.Note"
                    anchor="right"
                    factoryClass="com.cline.task.ui.TaskToolWindowFactory"/>
                    
        <applicationConfigurable
                parentId="tools"
                instance="com.cline.settings.ClineSettingsConfigurable"
                id="com.cline.settings.ClineSettingsConfigurable"
                displayName="Cline"/>
    </extensions>

    <actions>
        <action id="com.cline.actions.ClearChatAction"
                class="com.cline.actions.ClearChatAction"
                text="Clear Chat"
                description="Clear the chat history">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>
        
        <action id="com.cline.actions.OpenTasksAction"
                class="com.cline.actions.OpenTasksAction"
                text="Open Cline Tasks"
                description="Open the Cline Tasks window">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt T"/>
        </action>

        <action id="com.cline.actions.NewTaskAction"
                class="com.cline.actions.NewTaskAction"
                text="New Cline Task"
                description="Create a new Cline task">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt N"/>
        </action>
    </actions>
</idea-plugin>
